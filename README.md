# scrcpy 无线投屏自动化脚本

## 功能说明

本脚本用于无线投屏（scrcpy），并自动管理锁屏/休眠行为，兼容主流国产ROM。

- USB调试/充电时，遵循系统开发者选项设置（如“充电时不休眠”）。
- 无线投屏期间：
  - 自动设置 stay_awake=1，防止自动锁屏（但允许息屏）。
  - 自动禁用锁屏（lockscreen.disabled=1），防止锁屏界面弹出。
- 投屏断开后：
  - 恢复原有 stay_awake 和 lockscreen.disabled 设置。
  - 尝试主动锁屏（SLEEP/POWER），并自动切换一次休眠时间，兼容部分国产ROM锁屏恢复。
- 兼容性提示：部分国产ROM（如华为/荣耀等）可能无法完全自动恢复锁屏，需手动在设置界面切换一次休眠时间。

## 使用方法

1. 连接手机并开启 USB 调试。
2. 运行脚本：
   ```sh
   ./wireless_connect.sh [-i IP] [-p PORT] [-r 0|1|3] [-h]
   ```
   - `-i IP` 指定设备 IP（默认自动检测）
   - `-p PORT` 指定端口（默认 5555）
   - `-r ROT` 设置屏幕方向（0=竖屏, 1=横屏右, 3=横屏左）
   - `-h` 显示帮助信息

3. 按提示完成无线投屏。

## 说明

- 投屏期间自动防止锁屏，断开后自动恢复原设置。
- 若遇到投屏结束后无法自动恢复锁屏（部分国产ROM），请手动在设置界面切换一次休眠时间。
- 详细参数和日志请见脚本输出。

---

如有问题欢迎反馈。
